tunnel: quizdash-tunnel
tunnel: 260b3937-da0e-4802-bd8b-219e47806139
credentials-file: ./260b3937-da0e-4802-bd8b-219e47806139.json

# Use HTTP/2 protocol for stability
protocol: http2

ingress:
  # All traffic goes through Nginx Load Balancer
  - hostname: quizdash.dpdns.org
    service: http://localhost:8090  # ✅ Nginx port
    originRequest:
      httpHostHeader: quizdash.dpdns.org
      noTLSVerify: true
      
  - hostname: api.quizdash.dpdns.org
    service: http://localhost:8090  # ✅ Nginx port
    originRequest:
      httpHostHeader: api.quizdash.dpdns.org
      noTLSVerify: true
      
  - hostname: match.quizdash.dpdns.org
    service: http://localhost:8090  # ✅ Nginx port
    originRequest:
      httpHostHeader: match.quizdash.dpdns.org
      noTLSVerify: true
      
  # Adminer - can go direct (not load balanced)
  - hostname: adminer.quizdash.dpdns.org
    service: http://localhost:8080
    originRequest:
      httpHostHeader: adminer.quizdash.dpdns.org
      noTLSVerify: true
      
  # Prometheus - can go direct
  - hostname: prometheus.quizdash.dpdns.org
    service: http://localhost:9090
    originRequest:
      httpHostHeader: prometheus.quizdash.dpdns.org
      noTLSVerify: true
      
  # Grafana - FIXED PORT
  - hostname: grafana.quizdash.dpdns.org
    service: http://localhost:3003  # ✅ Grafana port (was wrong)
    originRequest:
      httpHostHeader: grafana.quizdash.dpdns.org
      noTLSVerify: true

  # Catch-all rule (must be last)
  - service: http_status:404