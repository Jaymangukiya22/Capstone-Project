tunnel: quizdash-tunnel
credentials-file: C:\Users\aryan\.cloudflared\260b3937-da0e-4802-bd8b-219e47806139.json

# Ingress rules - order matters!
ingress:
  # Frontend (Production Build)
  - hostname: quizdash.dpdns.org
    service: http://localhost:5174
    originRequest:
      httpHostHeader: localhost:5174
      connectTimeout: 30s
      tlsTimeout: 30s
      tcpKeepAlive: 30s
      keepAliveConnections: 10
      keepAliveTimeout: 90s
      
  # Backend API
  - hostname: api.quizdash.dpdns.org  
    service: http://localhost:3000
    originRequest:
      httpHostHeader: localhost:3000
      connectTimeout: 30s
      tlsTimeout: 30s
      tcpKeepAlive: 30s
      keepAliveConnections: 10
      keepAliveTimeout: 90s
      
  # Grafana Monitoring
  - hostname: grafana.quizdash.dpdns.org
    service: http://localhost:3003
    originRequest:
      httpHostHeader: localhost:3003
      connectTimeout: 30s
      tlsTimeout: 30s
      tcpKeepAlive: 30s
      keepAliveConnections: 10
      keepAliveTimeout: 90s
      
  # Match Server WebSocket
  - hostname: ws.quizdash.dpdns.org
    service: http://localhost:3001
    originRequest:
      httpHostHeader: localhost:3001
      connectTimeout: 30s
      tlsTimeout: 30s
      tcpKeepAlive: 30s
      keepAliveConnections: 10
      keepAliveTimeout: 90s
      
  # Catch-all rule (must be last)
  - service: http_status:404

# Performance optimizations
retries: 3
grace-period: 30s
compression: gzip

# Logging
loglevel: info
